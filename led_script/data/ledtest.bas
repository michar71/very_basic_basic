RCOUNT = 8
CCOUNT = 8
NUMLED = GETMAXLED()
DIM LEDR(NUMLED)
DIM LEDG(NUMLED)
DIM LEDB(NUMLED)

SUB SETREDXY X,Y,VAL 
	LEDR(((Y-1)*CCOUNT + (X-1))+1)=VAL
END SUB

SUB SETGREENXY X,Y,VAL 
	LEDG(((Y*CCOUNT-1) + (X-1))+1)=VAL
END SUB

SUB SETBLUEXY X,Y,VAL 
	LEDB(((Y*CCOUNT-1) + (X-1))+1)=VAL
END SUB

S = USEGAMMA(1)
FORMAT "LEDCOUNT: %",NUMLED
FORMAT "ROW COUNT: %",RCOUNT
FORMAT "COL COUNT: %",CCOUNT
S = SETLEDCOL(0,0,0)

#Use LUT
L = LOADLUT(0)
FORMAT "LUTSIZE %",S
STARTTIME = TIMESTAMP(1000)
ENDTIME = STARTTIME
#DO IT FOR 6 SEC
WHILE ((ENDTIME-STARTTIME) < 20)
	#LOOP THOUGH ENTRIES IN LUT
	FOR T=0 TO L
		C = LUT(T)
		S = SETLEDCOL(C,C,C)
		S = WAIT(40)
	END FOR
	S = WAIT(100)
	ENDTIME = TIMESTAMP(1000)
END WHILE
S = SETLEDCOL(0,0,0)
FORMAT "LUT DONE"

#SCROLL COLORS
STARTTIME = TIMESTAMP(1000)
ENDTIME = STARTTIME
DIM LEDH(NUMLED)
CNT = 0
#DO IT FOR 6 SEC
WHILE ((ENDTIME-STARTTIME) < 6)
	#Fill Saturation/Brightness
	S = SETARRAY(LEDG,1,NUMLED,255)
	S = SETARRAY(LEDB,1,NUMLED,200)
	#SHIFT HUE ARRAY BY 8
	NC = SIN256(CNT)
	CNT = CNT + 10	
	S = SHIFTARRAY(LEDH,8,NC)
	S = COPYARRAY(LEDH,LEDR)
	S = HSVTORGBARRAY(LEDR,LEDG,LEDB)
	#SHOW AND WAIT
	S = SETLEDRGB(LEDR,LEDG,LEDB)	
	S = WAIT(30)
	ENDTIME = TIMESTAMP(1000)
END WHILE
S = SETLEDCOL(0,0,0)
FORMAT "HSV COL DONE"

#COLOR ONE PIXEL AFTER ANOTHER
FOR R=0 TO 5
	FORMAT "OL: %",R
	FOR I=1 TO NUMLED
		FORMAT "LED: %",I
		S = SETARRAY(LEDR,1,NUMLED,0)
		S = SETARRAY(LEDG,1,NUMLED,0)
		S = SETARRAY(LEDB,1,NUMLED,0)	
		LEDR(I) = 128
		LEDG(I) = I * 2
		LEDB(I) = 200 - (R * 40)
		S = SETLEDRGB(LEDR,LEDG,LEDB)	
		S = WAIT(20)
	END FOR
END FOR
S = SETLEDCOL(0,0,0)
FORMAT "PIXELRUN DONE"

#RANDOM PIXELS WITH FADE
STARTTIME = TIMESTAMP(1000)
ENDTIME = STARTTIME
FORMAT "STARTSEC %", STARTTIME
#DO IT FOR 6 SEC
WHILE ((ENDTIME-STARTTIME) < 6)
    #DIM LEDS
	S = SCALELIMITARRAY(LEDR,-5,0,255)
	S = SCALELIMITARRAY(LEDG,-5,0,255)
	S = SCALELIMITARRAY(LEDB,-5,0,255)
	#PICK POSIITON
	RANPOS = RANDOM(1,NUMLED)
	#SET COLOR
	LEDR(RANPOS) = RANDOM(0,255)
	LEDR(RANPOS) = RANDOM(0,255)
	LEDR(RANPOS) = RANDOM(0,255)
	#UPDATE LEDS
	S = SETLEDRGB(LEDR,LEDG,LEDB)
	S = WAIT(20)
	ENDTIME = TIMESTAMP(1000)
END WHILE
S = SETLEDCOL(0,0,0)
FORMAT "RANDOM PIX DONE"

#PONG IN 2D
DVX = 7
DVY = -5

#WE CALULATE POSITON MULTIPLIED BY 10 AND DIVIDE AT THE END
PX = 5*10
PY = 2*10

STARTTIME = TIMESTAMP(1000)
ENDTIME = STARTTIME
FORMAT "STARTSEC %", STARTTIME
#DO IT FOR 6 SEC
WHILE ((ENDTIME-STARTTIME) < 12)
	#DIM RED CHANNEL
	S = SCALELIMITARRAY(LEDR,-50,0,255)
	#CALCULATE NEW X POSIITON
	PX = PX + DVX
	IF (PX > (CCOUNT*10))
		DVX = -DVX
		PX = (CCOUNT*10) - (PX-(CCOUNT*10))
		DVX = DVX + RANDOM(-5,5)
	END IF
	IF (PX < 1)
		DVX = -DVX
		PX = -PX
		DVX = DVX + RANDOM(-5,5)
	END IF	
	#CALCULATE NEW Y POSITION
	PY = PY + DVX
	IF (PY > (RCOUNT*10))
		DVY = -DVY
		PY = (RCOUNT*10) - (PY-(RCOUNT*10))
		DVY = DVY + RANDOM(-6,6)
	END IF
	IF (PY < 1)
		DVY = -DVY
		PY = -PY
		DVY = DVY + RANDOM(-6,6)
	END IF	

	#SET PIXEL
	FORMAT "PX:% PY:%",PX,PY	
	PXR = PX/10
	PYR = PY/10
	PXR = LIMIT(PXR,1,8)
	PYR = LIMIT(PYR,1,8)
	S = SCALELIMITARRAY(LEDR,-5,0,255)
	FORMAT "PXR:% PYR:%",PXR,PYR		
	SETREDXY PXR,PYR,128 
	S = SETLEDRGB(LEDR,LEDG,LEDB)
	S = WAIT(30)
	ENDTIME = TIMESTAMP(1000)
END WHILE
S = SETLEDCOL(0,0,0)
FORMAT "PONG DONE"

#MOVING SIN WAVE PATTERN

#CREATE PATTERN
FOR R=1 TO NUMLED
	LEDR(R) = SIN256(R*2)/2
	LEDG(R) = SIN256(R*4)/2
	LEDB(R) = SIN256(R*8)/2
END FOR

#ANIMATE PATTERN
FOR R=0 TO 500
	S = ROTATEARRAY(LEDR,1)
	S = ROTATEARRAY(LEDG,2)	
	S = ROTATEARRAY(LEDB,-3)	
	S = SETLEDRGB(LEDR,LEDG,LEDB)
	S = WAIT(30)
END FOR
S = SETLEDCOL(0,0,0)
FORMAT "SIN DONE"

